import{X as t,o as e,c as i,w as s,i as l,a as u,K as a,J as r,b as n,L as p,N as o,O as m,Y as h}from"./index-a1a35c15.js";import{r as d,_ as c}from"./uni-easyinput.44b316d4.js";import{_ as v}from"./_plugin-vue_export-helper.1b428a4d.js";const y=v({data:()=>({value1:"50",value2:"8",value3:"4",value4:"180",value5:0,currentSide:1,value6:1,value7:"3",receiver:null,play:null,timer:null,timer2:null,audio:null,number:0,groupNum:0,tipMessage:"",tipMessage2:"",onStop:!1,sideList:[{text:"是",value:1},{text:"否",value:0}],voiceType:[{text:"mp3",value:0},{text:"讯飞tts",value:1}]}),onLoad(){},onHide(){this.setKeepScreenOn(!1)},onUnload(){this.setKeepScreenOn(!1)},methods:{input(t){console.log("输入内容：",t)},setKeepScreenOn(t){},countTimeSpend(){let t=(Number(this.value1)*Number(this.value2)+Number(this.value4))*Number(this.value3);1===this.value5&&(t*=2,t+=Number(this.value7)*Number(this.value3)),t=(1.1*t).toFixed(0),this.tipMessage2="预计耗时 "+t+"秒"},startBtn(){this.setKeepScreenOn(!0);let t=[];1===this.value5?t.push("从左侧开始"):t.push("开始"),this.playAudioList(t,(()=>{this.start()})),this.countTimeSpend()},start(){this.tipMessage="运行中",this.timer&&(clearInterval(timer),this.timer=null),this.number=0,this.groupNum++;let t=["第"],e=this.splitNumber(this.groupNum);t=t.concat(e),t.push("组"),1===this.value5&&(1===this.currentSide?t.push("左侧"):2===this.currentSide&&t.push("右侧")),this.playAudioList(t,(()=>{this.startCounterIntenval()}))},startCounterIntenval(){this.timer=setInterval((()=>{if(this.number++,this.number<=Number(this.value1)&&this.playMusic(),this.number>Number(this.value1)){if(this.timer&&(clearInterval(this.timer),this.timer=null),this.number=0,1===this.value5&&1===this.currentSide){this.currentSide=2,this.groupNum--;let t=["左侧","完成","切换到右侧"];return void this.playAudioList(t,(()=>{this.timer2=setTimeout((()=>{this.start()}),1e3*Number(this.value7))}))}if(1===this.value5&&2===this.currentSide){this.currentSide=1;let t=["右侧","完成"];return void this.playAudioList(t,(()=>{setTimeout((()=>{this.groupWait()}),800)}))}0===this.value5&&setTimeout((()=>{this.groupWait()}),800)}}),1e3*Number(this.value2))},groupWait(){if(this.groupNum<Number(this.value3)){let t=["您已完成","第"],e=this.splitNumber(this.groupNum);t=t.concat(e).concat(["组","组歇"]);let i=this.splitNumber(this.value4);t=t.concat(i),t.push("秒"),this.playAudioList(t),this.timer2=setTimeout((()=>{this.start()}),1e3*Number(this.value4))}else{this.tipMessage="完成所有组合";let t=["完成所有组合","您已完成","共"],e=this.splitNumber(this.groupNum);t=t.concat(e),t.push("组"),1===this.value5&&(t=t.concat(["左右","各"]));let i=Number(this.value1)*Number(this.groupNum),s=this.splitNumber(i);t=t.concat(s),t.push("次"),this.playAudioList(t),this.setKeepScreenOn(!1)}},pause(){this.tipMessage="暂停, 组歇中暂停再继续可跳过组歇";this.playAudioList(["暂停"]),clearInterval(this.timer),this.timer=null,clearTimeout(this.timer2),this.timer2=null,this.onStop=!0},resume(){this.tipMessage="继续";this.playAudioList(["继续"],(()=>{0!==this.number&&this.startCounterIntenval(),0===this.number&&this.start()})),this.onStop=!1},stop(){this.tipMessage="停止";this.playAudioList(["停止"]),this.number=0,this.groupNum=0,clearInterval(this.timer),this.timer=null,clearTimeout(this.timer2),this.timer2=null,this.setKeepScreenOn(!1)},playMusic(){let t=this.number;if(this.number%10!=0&&(t=this.number%10),t<=100){let e=[Number(t)+""];this.playAudioList(e)}else if(t<1e3){let e=[];if(this.number%10!=0){e.push(parseInt(t/100)+"00");let i="一十";1!==parseInt(t%100/10)&&(i=parseInt(t%100/10)+"0"),e.push(i),this.playAudioList(e)}}else{this.tipMessage="超过一千";let t=["超过一千暂不支持"];this.playAudioList(t),this.stop()}},splitNumber(t){let e=[];if(t>1e3)return e.push("超过一千暂不支持"),e;{let i=parseInt(t/1e3);i>0&&e.push(i+"000");let s=parseInt(t%1e3/100);s>0&&e.push(s+"00");let l=parseInt(t%100/10);l>0&&e.push(l+"0");let u=parseInt(t%10);return u>0&&e.push(u+""),e}},playMusic3(){let t=this.splitNumber(305);console.log(t);this.playAudioList(["您已完成","第","10","组","组歇","10","6","秒"])},playAudioList(t,e){this.playAudioListH5(t,e)},playAudioListH5(t,e){let i=new Audio,s=0,l="/static/mp3/"+t[s]+".mp3";i.src=l,i.play(),i.addEventListener("ended",(()=>{if(s++,t[s]){let e="/static/mp3/"+t[s]+".mp3";i.src=e,i.play()}else i.pause(),i=null,e&&e()}))},playAudioListAndroid(e,i){let s=t(),l=0,u="/static/mp3/"+e[l]+".mp3";s.src=u,s.stop(),s.play(),s.onEnded((()=>{if(l++,e[l]){let t="/static/mp3/"+e[l]+".mp3";s.src=t,s.play()}else s.destroy(),s=null,i&&i()})),s.onError((()=>{console.log("i am onError")}))},initVoicePlayer(){if("Android"===plus.os.name){var t=plus.android.runtimeMainActivity();plus.android.importClass("com.iflytek.cloud.SpeechUtility").createUtility(t,"appid=5c2c6d5f");var e=plus.android.importClass("com.iflytek.cloud.SpeechSynthesizer");this.play=e.createSynthesizer(t,null),play.startSpeaking(text,null)}},startSpeaking(){this.play.startSpeaking("新年快乐",this.receiver)},stopSpeaking(){this.play.stopSpeaking()},pauseSpeaking(){this.play.pauseSpeaking()},resumeSpeaking(){this.play.resumeSpeaking()}}},[["render",function(t,v,y,f,b,g){const S=o,N=d(m("uni-easyinput"),c),_=l,I=h;return e(),i(_,null,{default:s((()=>[u(_,{class:"uni-common-mt"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("本页面会播放音频,请注意音量")])),_:1}),u(_,{class:"uni-form-item uni-column"},{default:s((()=>[u(_,{class:"form-item"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("每组次数（整数）：")])),_:1}),u(N,{class:"uni-mt-5",trim:"all",modelValue:b.value1,"onUpdate:modelValue":v[0]||(v[0]=t=>b.value1=t),placeholder:"请输入内容",onInput:g.input},null,8,["modelValue","onInput"])])),_:1}),u(_,{class:"form-item"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("每次时间间隔（秒，可以有小数）：")])),_:1}),u(N,{class:"uni-mt-5",trim:"all",modelValue:b.value2,"onUpdate:modelValue":v[1]||(v[1]=t=>b.value2=t),placeholder:"请输入内容",onInput:g.input},null,8,["modelValue","onInput"])])),_:1}),u(_,{class:"form-item"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("组数（整数）：")])),_:1}),u(N,{class:"uni-mt-5",trim:"all",modelValue:b.value3,"onUpdate:modelValue":v[2]||(v[2]=t=>b.value3=t),placeholder:"请输入内容",onInput:g.input},null,8,["modelValue","onInput"])])),_:1}),u(_,{class:"form-item"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("每组时间间隔（秒，可以有小数，建议8以上)：")])),_:1}),u(N,{class:"uni-mt-5",trim:"all",modelValue:b.value4,"onUpdate:modelValue":v[3]||(v[3]=t=>b.value4=t),placeholder:"请输入内容",onInput:g.input},null,8,["modelValue","onInput"])])),_:1}),1===b.value5?(e(),i(_,{key:0,class:"form-item"},{default:s((()=>[u(S,{class:"uni-subtitle"},{default:s((()=>[a("左右切换时间（单位：秒，可以有小数）：")])),_:1}),u(N,{class:"uni-mt-5",trim:"all",modelValue:b.value7,"onUpdate:modelValue":v[4]||(v[4]=t=>b.value7=t),placeholder:"请输入内容",onInput:g.input},null,8,["modelValue","onInput"])])),_:1})):r("",!0),u(_,{class:"button-group"},{default:s((()=>[u(I,{type:"primary",size:"default",onClick:g.startBtn},{default:s((()=>[a("开始")])),_:1},8,["onClick"]),b.onStop?r("",!0):(e(),i(I,{key:0,type:"primary",size:"default",onClick:g.pause},{default:s((()=>[a("暂停")])),_:1},8,["onClick"])),b.onStop?(e(),i(I,{key:1,type:"primary",size:"default",onClick:g.resume},{default:s((()=>[a("继续")])),_:1},8,["onClick"])):r("",!0),u(I,{type:"primary",size:"default",onClick:g.stop},{default:s((()=>[a("停止")])),_:1},8,["onClick"]),u(I,{type:"primary",size:"default",onClick:g.countTimeSpend},{default:s((()=>[a("计算耗时")])),_:1},8,["onClick"])])),_:1})])),_:1}),n("br"),u(S,{class:"uni-subtitle"},{default:s((()=>[u(S,null,{default:s((()=>[a("您已完成："+p(b.groupNum)+"组，"+p(b.number)+"次 ",1)])),_:1}),1===b.value5?(e(),i(S,{key:0},{default:s((()=>[a(p(1===b.currentSide?"左侧":"右侧"),1)])),_:1})):r("",!0)])),_:1}),n("br"),u(S,{class:"uni-subtitle"},{default:s((()=>[a(p(b.tipMessage2),1)])),_:1}),n("br"),u(S,{class:"uni-subtitle"},{default:s((()=>[a(p(b.tipMessage),1)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-e7073b90"]]);export{y as default};
